import type { Metadata } from 'next'
import localFont from 'next/font/local'
import Providers from '@/components/Providers'
import { getSession } from '@/api/auth'
import { Box, VStack } from 'styled-system/jsx'
import './globals.css'
import Menu from '@/components/menu/Menu'
import DailyBonusDialogContainer from '@/components/daily-bonus/DailyBonusDialogContainer'

interface RootLayoutProps {
  children: React.ReactNode
}

const jfOpenHuninn = localFont({ src: './jf-openhuninn-2.1.ttf' })

export const metadata: Metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

const RootLayout = async (props: RootLayoutProps) => {
  const { children } = props

  const session = await getSession()

  return (
    <html lang="en" className={jfOpenHuninn.className}>
      <body>
        <Providers session={session}>
          <VStack minW="100vw" minH="100vh" p="32px">
            <Menu />
            <Box flex="1 0 0">{children}</Box>
          </VStack>
          <DailyBonusDialogContainer />
        </Providers>
      </body>
    </html>
  )
}

export default RootLayout
